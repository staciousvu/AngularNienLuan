<div class="container mt-3">
  <h2 class="mb-4">Chỉnh sửa sản phẩm</h2>
  <div class="form-container" style="border-top: 5px solid #3c8dbc">

    <form action="adminproduct" method="post" enctype="multipart/form-data">
      <input type="hidden" name="action" value="update">
      <input type="hidden" name="id_product" value="${product.id}">
      <div class="form-group">
        <label for="name">Tên sản phẩm:</label>
        <input type="text" class="form-control" value="${product.name}" id="name" name="name" placeholder="Nhập tên sản phẩm" required>
      </div>

      <div class="form-group">
        <label for="price">Giá:</label>
        <input type="number" class="form-control" value="${product.price}" id="price" name="price" placeholder="Nhập giá sản phẩm" step="0.01" required>
      </div>

      <div class="form-group">
        <label for="quantity">Số lượng:</label>
        <input type="number" class="form-control" value="${product.quantity}" id="quantity" name="quantity" placeholder="Nhập số lượng sản phẩm" required>
      </div>
      <div class="form-group">
        <label for="status">Trạng thái:</label>
        <select class="form-control" id="status" name="status" required></select>
      </div>
      <div class="form-group">
        <label for="id_category">Danh mục:</label>
        <select class="form-control" id="id_category" name="id_category" required>

            <option> </option>

        </select>
      </div>



      <div class="form-group">
        <label for="image">Hình ảnh:</label>
        <input type="file" class="form-control" id="image" name="image" accept="image/*" onchange="previewImage(event)">
        <div class="mt-2">
          <img id="imagePreview" src="./JavaNCimages/${product.image}" alt="Ảnh sản phẩm" style="width: 200px; height: auto;">
        </div>
      </div>

      <div class="form-group d-flex justify-content-end mt-3">
          <button type="submit" class="btn btn-primary">Lưu dữ liệu</button>
          <a class="btn btn-secondary" href="adminproduct">Quay lại</a>
        </div>
    </form>
  </div>
</div>
<script>
  function previewImage(event) {
    const input = event.target;
    const file = input.files[0];
    const preview = document.getElementById('imagePreview');

    if (file) {
      const reader = new FileReader();

      reader.onload = function (e) {
        preview.src = e.target.result;
        preview.style.display = 'block';
      };

      reader.readAsDataURL(file);
    } else {
      preview.src = '#';
      preview.style.display = 'none';
    }
  }
</script>

